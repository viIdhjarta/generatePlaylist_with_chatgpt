import{j as e}from"../../react/jsx-runtime.BfNg0mxH.mjs";import{r as a}from"../../react.DaX-6B7k.mjs";const w="https://backend.tapioka.workers.dev";function N(){const[r,n]=a.useState(""),[i,o]=a.useState(!1),[c,d]=a.useState(null),[t,x]=a.useState(null),m=["集中して作業したい時に聴きたい曲","90年代の懐かしいJ-POPを集めたプレイリスト","ドライブに最適なアップテンポな曲","リラックスしてお風呂に入りたい時の曲","朝の目覚めに聴きたい爽やかな曲"],p=async s=>{if(s.preventDefault(),!!r.trim()){o(!0),d(null);try{const l=await fetch(`${w}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:r})}),h=await l.json();if(!l.ok)throw new Error(h.error||"プレイリストの生成に失敗しました");x({prompt:r,setlist_id:h})}catch(l){d(l instanceof Error?l.message:"予期せぬエラーが発生しました"),console.error(l)}finally{o(!1)}}},u=s=>{n(s)},g=()=>{x(null),n("")},f=()=>{t?.setlist_id&&window.open(`https://open.spotify.com/playlist/${t.setlist_id}`,"_blank"),console.log(t?.setlist_id)},j=()=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-white text-4xl md:text-5xl font-bold text-center leading-tight mb-6",children:["自然言語で",e.jsx("span",{className:"text-green-500",children:"Spotify"}),"プレイリストを作成"]}),e.jsx("p",{className:"text-gray-400 text-center mb-10 max-w-xl",children:"あなたの気分や状況を言葉で表現するだけで、ぴったりのプレイリストを自動生成"}),e.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 w-full max-w-xl border border-gray-800",children:[e.jsxs("form",{onSubmit:p,children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("input",{type:"text",value:r,onChange:s=>n(s.target.value),className:"w-full bg-gray-800 rounded-full px-5 py-4 text-gray-200 pr-12 focus:outline-none focus:ring-2 focus:ring-spotify-green",placeholder:"例: 雨の日に聴きたい落ち着く曲",disabled:i}),e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-search-icon lucide-search absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:[e.jsx("path",{d:"m21 21-4.34-4.34"}),e.jsx("circle",{cx:"11",cy:"11",r:"8"})]})]}),e.jsxs("button",{type:"submit",className:`w-full bg-green-500 text-black font-bold py-4 rounded-full transition flex items-center justify-center gap-2 ${i||!r.trim()?"opacity-50 cursor-not-allowed":"hover:bg-green-600"}`,disabled:i||!r.trim(),children:[i?e.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-sparkles-icon lucide-sparkles",children:[e.jsx("path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"}),e.jsx("path",{d:"M20 3v4"}),e.jsx("path",{d:"M22 5h-4"}),e.jsx("path",{d:"M4 17v2"}),e.jsx("path",{d:"M5 18H3"})]}),i?"生成中...":"プレイリストを作成"]})]}),c&&e.jsxs("div",{className:"mt-4 p-3 bg-red-900/50 text-red-200 rounded-lg text-sm",children:["エラー: ",c]})]}),e.jsxs("div",{className:"w-full max-w-xl mx-auto px-4 mb-12",children:[e.jsx("div",{className:"text-center text-gray-300 font-bold text-lg mb-6 mt-10",children:"こんな風に聞いてみましょう"}),e.jsx("div",{className:"flex flex-col gap-3",children:m.map((s,l)=>e.jsx("button",{onClick:()=>u(s),className:"bg-gray-900 border border-gray-800 rounded-lg px-5 py-4 text-left hover:bg-gray-800 transition group",children:e.jsx("span",{className:"text-gray-300 group-hover:text-spotify-green",children:s})},l))})]})]}),y=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"w-full max-w-xl mx-auto my-6",children:[e.jsxs("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 w-full border border-gray-800 mb-6",children:[e.jsx("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:e.jsxs("p",{className:"text-gray-300 italic",children:['"',t?.prompt,'"']})}),t?.setlist_id&&e.jsx("div",{className:"mb-6",children:e.jsx("iframe",{src:`https://open.spotify.com/embed/playlist/${t.setlist_id}`,width:"100%",height:"380",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded-lg"})})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{onClick:g,className:"w-full bg-gray-800 text-white font-bold py-4 rounded-full hover:bg-gray-700 transition flex items-center justify-center",children:"新しいプレイリストを作成"}),t?.setlist_id&&e.jsxs("button",{onClick:f,className:"w-full bg-green-500 text-black font-bold py-4 rounded-full hover:bg-green-600 transition flex items-center justify-center gap-2",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-spotify",children:[e.jsx("circle",{cx:"12",cy:"12",r:"10"}),e.jsx("path",{d:"M8 11.8A5.4 5.4 0 0 1 17.8 9"}),e.jsx("path",{d:"M7 15a6.5 6.5 0 0 1 11.4-4.3"}),e.jsx("path",{d:"M8.5 18a8 8 0 0 1 13.5-5.3"})]}),"Spotifyで開く"]})]})]})});return e.jsxs("div",{className:"min-h-screen bg-black flex flex-col items-center justify-between",children:[e.jsxs("div",{className:"flex flex-col items-center mt-12 w-full px-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00f900","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-music-icon lucide-music",children:[e.jsx("path",{d:"M9 18V5l12-2v13"}),e.jsx("circle",{cx:"6",cy:"18",r:"3"}),e.jsx("circle",{cx:"18",cy:"16",r:"3"})]}),e.jsx("h1",{className:"text-white text-3xl font-bold",children:"Spotify AI"})]}),t?y():j()]}),e.jsxs("footer",{className:"w-full text-center py-8 bg-gray-900 text-gray-400 text-sm border-t border-gray-800",children:[e.jsx("div",{className:"flex items-center justify-center gap-2 mb-2",children:e.jsx("span",{className:"font-bold text-white",children:"Spotify AI Playlist Creator"})}),e.jsxs("div",{children:["by"," ",e.jsx("a",{href:"https://github.com/viIdhjarta",className:"text-green-400 hover:underline",children:"vildhjarta"})]})]})]})}export{N as default};
