import{j as h}from"./react/jsx-runtime.BfNg0mxH.mjs";import{r as g}from"./react.DaX-6B7k.mjs";import{c as ne}from"./react-dom/client.WyImRt2Q.mjs";import{c as H}from"./react-server-dom-webpack/client.browser.BgEtflDr.mjs";import{PAGE_ROOT as L,ClientContext as se,useClient as J,FlightContext as Q,FlightComponentContext as N}from"./@lazarv/react-server/client/context.1OmqlEwD.mjs";import"./react-dom.D9W7S9Xl.mjs";const o=L,V=se,j=new Map,i=new Map,K=new Map,m=new Map,w=new Map,k=new Map,a=new Map,ae=(t,e)=>(m.set(t,e),()=>m.delete(t)),ce=(t,e)=>{K.has(t)||K.set(t,new Set);const r=K.get(t);return r.add(e),()=>r.delete(e)},v=(t,e=t,r={},n=()=>{})=>{if(!K.has(t))return n();const s=K.get(t);for(const c of s)c(e,r,n)},F=(t,e)=>typeof t<"u"&&t!==null&&t!==!0?typeof t=="function"?t(e):typeof t=="number"&&e.timestamp?Date.now()-e.timestamp>t:t:!0,q=(t,{outlet:e=o,revalidate:r,ttl:n=1/0})=>{if(k.get(e)!==t){i.delete(e),i.delete(t),k.set(e,t);const s=`${e}:${t}`;a.has(s)?i.set(e,a.get(s)):(!a.has(s)||a.has(s)&&F(r,{outlet:e,url:t,timestamp:a.get(`${s}:timestamp`)}))&&(B(t,{revalidate:r,outlet:e,onError:()=>a.delete(s),prefetch:!0,fromCache:!0}),a.set(s,i.get(e)),a.set(`${s}:timestamp`,Date.now()),typeof n=="number"&&n<1/0&&setTimeout(()=>{a.has(s)&&a.delete(s)},n))}},oe=(t,e={})=>{if(m.size>1){const r=new Set(m.keys());return r.delete(o),Promise.all(Array.from(r).map(n=>q(t,{...e,outlet:e.outlet||n})))}return q(t,e)},ie=async(t=o,e={})=>new Promise((r,n)=>{const s=t===o?o:m.get(t)||o;k.get(t)===s?k.delete(t):(i.delete(s),i.delete(t)),v(t,s,e,c=>{c?n(c):(j.set(t,i.get(t)),r())})});let P=new URL(location);const D=(t,{outlet:e=o,push:r,rollback:n=0,revalidate:s,noCache:c,..._})=>new Promise((d,u)=>{if(typeof n=="number"&&n>0){const f=`${e}:${m.get(e)||location.href}`;if(!a.has(f)){const b=`${f}:timeout`;a.has(b)&&(clearTimeout(a.get(b)),a.delete(b)),a.set(f,j.get(e)),a.set(b,setTimeout(()=>{a.has(f)&&a.delete(f)},n))}}m.set(e,t),e===o&&(r!==!1?history.pushState(Object.fromEntries(m.entries()),"",t):history.replaceState(Object.fromEntries(m.entries()),"",t),P=new URL(location));const l=`${e}:${t}`;if(a.has(l)){i.set(e,a.get(l)),F(s,{outlet:e,url:t,timestamp:a.get(`${l}:timestamp`)})&&a.delete(l);const f=`${l}:timeout`;a.has(f)&&(clearTimeout(a.get(f)),a.delete(f))}else i.delete(t),i.delete(e);v(e,t,{..._,noCache:c,fromCache:!0},f=>{f?u(f):(j.set(e,i.get(e)),F(s,{outlet:e,url:t})||(a.set(`${e}:${t}`,i.get(e)),a.set(`${e}:${t}:timestamp`,Date.now())),d())})}),X=(t,e={})=>{if(!(e.outlet===o)&&m.size>1){const n=new Set(m.keys());return n.delete(o),(e.push||e.replace)&&(e.push!==!1?history.pushState(Object.fromEntries(m.entries()),"",t):history.replaceState(Object.fromEntries(m.entries()),"",t),P=new URL(location)),e.outlet?D(t,{...e,outlet:e.outlet}):Promise.all(Array.from(n).map(s=>D(t,{...e,outlet:e.outlet||s})))}return D(t,e)},le=(t,e)=>X(t,{...e,push:!1}),fe=(t,e={})=>new Promise((r,n)=>{const s=e.url??(m.get(t)||o);if(i.delete(s),i.delete(t),e.noEmit)return r();v(t,s,{...e,outlet:t,noCache:!0},c=>{c?n(c):(j.set(t,i.get(t)),r())})});window.addEventListener("popstate",()=>{const t=new URL(location);if(P.pathname===t.pathname&&P.search===t.search&&(P.hash!==t.hash||P.hash===t.hash))return;P=t;const e=`${o}:${location.href}`;if(a.has(e)){i.set(o,a.get(e)),a.delete(e);const r=`${e}:timeout`;a.has(r)&&(clearTimeout(a.get(r)),a.delete(r)),m.set(o,location.href),v(o,location.href,{fromCache:!0},n=>{n||j.set(o,i.get(o))})}else{const r=new Set(m.keys());r.has(o)&&r.size>1&&r.delete(o);for(const n of r){const s=`${n}:${location.href}`;if(a.has(s)){i.set(n,a.get(s)),a.delete(s);const c=`${s}:timeout`;a.has(c)&&(clearTimeout(a.get(c)),a.delete(c))}else i.delete(n),i.delete(location.href);m.set(n,location.href),v(n,location.href,{fromCache:!0},c=>{c||j.set(n,i.get(n))})}}});const U=(t,e,r)=>({async callServer(n,s){return new Promise(async(c,_)=>{try{const d=await H.encodeReply(s),u=t||o;let l=t;i.delete(u),i.delete(l),B(m.get(l)||u,{method:"POST",body:d,outlet:l,remote:e,defer:r,callServer:n||!0,onFetch:f=>{const b=typeof f.headers.get("React-Server-Data")=="string"?n||!0:!1;v(l,u,{callServer:b},async($,O)=>{if($)_($);else{if(!b){const y=f.headers.get("React-Server-Render"),p=f.headers.get("React-Server-Outlet");return y&&p&&(i.set(p,await O),v(p,y,{})),c()}const R=await O;try{const y=await R.at(-1);c(y);const p=f.headers.get("React-Server-Render"),A=f.headers.get("React-Server-Outlet");p&&A&&(i.set(A,R.slice(0,-1)),v(A,p,{}))}catch(y){_(y)}}})},onError:f=>{_(f)},headers:{"React-Server-Action":encodeURIComponent(n)}})}catch(d){_(d)}})}}),Y=(t=o,e,r)=>{if(w.has(t)||r!==!1&&w.has(`prefetch:${t}`)){const n=w.get(t),s=w.get(`prefetch:${t}`);for(const c of[...n||[],...r!==!1?s||[]:[]])c?.signal.aborted||c.abort(e);w.delete(t),w.delete(`prefetch:${t}`),r!==!1&&k.delete(t)}};function B(t,e={}){let r=e.signal;if(!i.has(e.outlet||t)||e.noCache){if(!e.defer&&self[`__flightStream__${e.outlet||o}__`]&&!self[`__flightHydration__${e.outlet||o}__`]){const n=self[`__flightStream__${e.outlet||o}__`].readable,[s,c]=n.tee();self[`__flightStream__${e.outlet||o}__`]={readable:c},i.set(e.outlet||t,H.createFromReadableStream(s,U(e.outlet||t,e.remote))),self[`__flightHydration__${e.outlet||o}__`]=!0,j.set(e.outlet||t,i.get(e.outlet||t))}else if(!e.fromScript){const n=new URL(t===o?location.href:e.url??t,location),s=e.outlet&&e.outlet!==o?`@${e.outlet}.`:"";n.pathname=`${n.pathname}/${s}rsc.x-component`.replace(/\/+/g,"/");const c=n.toString();if(!e.callServer){Y(e.outlet||t,new DOMException("navigation","AbortError"),!e.prefetch),r||(r=new AbortController),e.onAbort&&r.signal.addEventListener("abort",e.onAbort),e.prefetch&&F(e.revalidate,{outlet:e.outlet||o,url:t,timestamp:a.get(`${e.outlet||o}:${t}:timestamp`)})&&r.signal.addEventListener("abort",()=>{a.delete(`${e.outlet||o}:${t}`)});const d=`${e.prefetch?"prefetch:":""}${e.outlet||t}`;w.has(d)||w.set(d,new Set),w.get(d).add(r)}const _=H.createFromReadableStream(new ReadableStream({type:"bytes",async start(d){let u;try{u=await fetch(c,{...e.request,method:e.method,body:e.body,headers:{...e.request?.headers,accept:"text/x-component",...e.noCache&&{"Cache-Control":"no-cache"},...e.prefetch&&{"React-Server-Prefetch":"true"},...e.headers},credentials:"include",signal:r?.signal});const{body:l}=u;if(window.dispatchEvent(new CustomEvent(`__react_server_flight_error_${e.outlet}__`,{detail:{error:null,options:e,url:t}})),e.onFetch?.(u),r?.signal.aborted){d.error(r.signal.reason);return}for await(const f of l)d.enqueue(f);if(d.close(),w.has(e.outlet||t)){const f=w.get(e.outlet||t);f.has(r)&&f.delete(r)}}catch(l){if(l instanceof DOMException&&l.name==="AbortError"){i.delete(e.outlet||t),a.delete(`${e.outlet||o}:${t}`);return}return e.onError?.(l),new Promise(async f=>{l.digest=l.message,l.environmentName="react-server",window.dispatchEvent(new CustomEvent(`__react_server_flight_error_${e.outlet}__`,{detail:{error:l,options:e,url:t}}));const b=new TextEncoder;await new Promise($=>setTimeout($,0)),d.enqueue(b.encode(`0:["$L1"]
1:null
`)),d.close(),f()})}}}),U(e.outlet||t,e.remote,e.defer));i.set(e.outlet||t,_)}}return typeof e.onReady=="function"&&!r?.signal.aborted?e.onReady(i.get(e.outlet||t)):i.get(e.outlet||t)}function ue({children:t}){return h.jsx(V.Provider,{value:{registerOutlet:ae,refresh:ie,prefetch:oe,navigate:X,replace:le,subscribe:ce,invalidate:fe,abort:Y,getFlightResponse:B,state:{activeChunk:j,cache:i,flightCache:a,listeners:K,outlets:m,outletAbortControllers:w,prefetching:k}},children:t})}function he({remote:t=!1,defer:e=!1,request:r,children:n}){const{url:s,outlet:c}=g.useContext(Q),_=J(),{registerOutlet:d,subscribe:u,getFlightResponse:l,abort:f}=_,[{resourceKey:b,error:$,Component:O},R]=g.useState({resourceKey:0,error:null,Component:n||(c===L||t?l?.(s,{outlet:c,remote:t,defer:e,request:r}):null)}),y=g.useRef(null),p=g.useRef(null),A=g.useRef(O);if(g.useEffect(()=>{let C=!0;const T=d(c,s),Z=u(c||s,async(ee,x,M)=>{if(typeof x.Component<"u"){const S=new DOMException("render","AbortError");f(c,S),p.current?.reject(S),R(E=>({...E,resourceKey:E.resourceKey+1,error:y.current,Component:x.Component})),M(null,x.Component);return}let G,W;const te=new Promise((S,E)=>{G=S,W=E,p.current={resolve:S,reject:E}}),re=l(ee,{...x,outlet:c,remote:t,request:r,onReady:x.callServer?void 0:G,onAbort:x.callServer?void 0:W});if(x.callServer)M(null,re);else if(C){x.fallback&&g.startTransition(()=>{R(S=>({...S,resourceKey:S.resourceKey+1,error:y.current,Component:x.fallback}))});try{const S=await te;p.current=null,g.startTransition(()=>{R(E=>({...E,resourceKey:E.resourceKey+1,error:y.current,Component:S})),M(null,S)})}catch{p.current=null}}});return()=>{C=!1,T(),Z()}},[s,c,t,r,u,l]),g.useEffect(()=>{(n||c!==L&&O)&&R(C=>({...C,resourceKey:C.resourceKey+1,error:y.current,Component:n}))},[n]),g.useEffect(()=>{(t||e)&&l(s,{outlet:c,remote:t,defer:e,request:r,fromScript:!e,onReady:C=>{C&&g.startTransition(()=>R(T=>({...T,resourceKey:T.resourceKey+1,error:y.current,Component:C})))}})},[s,c,t,e,r,l]),g.useEffect(()=>{const C=new AbortController;return window.addEventListener(`__react_server_flight_error_${c}__`,T=>{y.current=T.detail.error},{signal:C.signal}),()=>C.abort()},[c]),$){if(c===L)return h.jsx(N.Provider,{value:{resourceKey:b,error:$},children:A.current});throw $}return A.current=O,h.jsx(N.Provider,{value:{resourceKey:b,error:$},children:O})}function de({url:t,outlet:e=null,remote:r,defer:n,request:s,children:c}){const{navigate:_,abort:d}=J();return h.jsx(Q.Provider,{value:{url:t,outlet:e,refresh(u={}){return refresh(e,u)},prefetch(u,l={}){return prefetch(u,{outlet:e,...l})},navigate(u,l={}){return _(u,{outlet:e,...l})},replace(u,l={}){return replace(u,{outlet:e,...l})},abort(u){return d(e,u)}},children:h.jsx(he,{remote:r,defer:n,request:s,children:c})})}self.__react_server_callServer__=U(o).callServer;const z={didCatch:!1,error:null};function I(t,e,r=new Set){return t===e?!0:r.has(e)?!1:(r.add(e),Array.isArray(e)?e.some(n=>I(t,n,r)):typeof e=="object"&&e!==null?Object.values(e).some(n=>I(t,n,r)):!1)}class me extends g.Component{static contextType=V;constructor(e){super(e),this.state={...z}}static getDerivedStateFromError(e){return{didCatch:!0,error:e,info:null}}componentDidCatch(e,r){for(const[n,s]of this.context.state.cache.entries())if(I(e,s)){this.setState({didCatch:!0,error:e,info:r,outlet:n,url:this.context.state.outlets.get(n)||o});break}}resetErrorBoundary=async()=>{const{error:e,outlet:r,url:n}=this.state;typeof e?.digest=="string"?(r!==o&&(self[`__flightHydration__${o}__`]=!1),this.context.invalidate(r,{noEmit:!0}),this.context.getFlightResponse(r,{outlet:r,remote:r!==o&&self[`__flightStream__${r}__`],url:n,onFetch:()=>{this.setState(z)}})):this.setState(z)};render(){const{didCatch:e,error:r}=this.state;return e?h.jsxs("html",{lang:"en",suppressHydrationWarning:!0,children:[h.jsxs("head",{children:[h.jsx("title",{children:document.title}),h.jsx("meta",{name:"viewport",content:"width=device-width, initial-scale=1"}),h.jsx("meta",{charSet:"utf-8"}),h.jsx("style",{dangerouslySetInnerHTML:{__html:`
              * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
              }

              body {
                font-family: system-ui, -apple-system, sans-serif;
                padding: 2rem;
                line-height: 1.5;
                background: #fff;
              }

              h1 {
                font-size: 2rem;
                font-weight: 600;
                margin-bottom: 1rem;
                color: #e11d48;
              }

              pre {
                margin: 1rem 0;
                padding: 1rem;
                background: #f1f5f9;
                color: #374151;
                border-radius: 0.5rem;
                font-size: 0.875rem;
              }

              button {
                padding: 0.5rem 1rem;
                background: #0ea5e9;
                color: #fff;
                border: none;
                border-radius: 0.25rem;
                cursor: pointer;
              }

              button:hover {
                background: #0284c7;
              }
            `}})]}),h.jsxs("body",{suppressHydrationWarning:!0,children:[h.jsx("h1",{children:r.digest||"Error"}),h.jsx("pre",{style:{width:"100%",whiteSpace:"pre-wrap",wordWrap:"break-word"},children:r.message}),h.jsx("button",{onClick:this.resetErrorBoundary,children:"Retry"})]})]}):this.props.children}}function ge(){return h.jsx(ue,{children:h.jsx(me,{children:h.jsx(de,{outlet:o,url:location.href})})})}g.startTransition(()=>{ne.hydrateRoot(self.__react_server_hydration_container__?.()??document,h.jsx(g.StrictMode,{children:h.jsx(ge,{})}))});
