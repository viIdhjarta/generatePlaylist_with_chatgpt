import{jsxs as t,jsx as e,Fragment as u}from"react/jsx-runtime";import{useState as n}from"react";const N="https://backend.tapioka.workers.dev";function C(){const[s,o]=n(""),[a,c]=n(!1),[d,h]=n(null),[l,m]=n(null),g=["集中して作業したい時に聴きたい曲","90年代の懐かしいJ-POPを集めたプレイリスト","ドライブに最適なアップテンポな曲","リラックスしてお風呂に入りたい時の曲","朝の目覚めに聴きたい爽やかな曲"],x=async r=>{if(r.preventDefault(),!!s.trim()){c(!0),h(null);try{const i=await fetch(`${N}/submit`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({prompt:s})}),p=await i.json();if(!i.ok)throw new Error(p.error||"プレイリストの生成に失敗しました");m({prompt:s,setlist_id:p})}catch(i){h(i instanceof Error?i.message:"予期せぬエラーが発生しました"),console.error(i)}finally{c(!1)}}},f=r=>{o(r)},y=()=>{m(null),o("")},w=()=>{l?.setlist_id&&window.open(`https://open.spotify.com/playlist/${l.setlist_id}`,"_blank"),console.log(l?.setlist_id)},b=()=>t(u,{children:[t("div",{className:"text-white text-4xl md:text-5xl font-bold text-center leading-tight mb-6",children:["自然言語で",e("span",{className:"text-green-500",children:"Spotify"}),"プレイリストを作成"]}),e("p",{className:"text-gray-400 text-center mb-10 max-w-xl",children:"あなたの気分や状況を言葉で表現するだけで、ぴったりのプレイリストを自動生成"}),t("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 w-full max-w-xl border border-gray-800",children:[t("form",{onSubmit:x,children:[t("div",{className:"relative mb-4",children:[e("input",{type:"text",value:s,onChange:r=>o(r.target.value),className:"w-full bg-gray-800 rounded-full px-5 py-4 text-gray-200 pr-12 focus:outline-none focus:ring-2 focus:ring-spotify-green",placeholder:"例: 雨の日に聴きたい落ち着く曲",disabled:a}),t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-search-icon lucide-search absolute right-4 top-1/2 transform -translate-y-1/2 text-gray-400",children:[e("path",{d:"m21 21-4.34-4.34"}),e("circle",{cx:"11",cy:"11",r:"8"})]})]}),t("button",{type:"submit",className:`w-full bg-green-500 text-black font-bold py-4 rounded-full transition flex items-center justify-center gap-2 ${a||!s.trim()?"opacity-50 cursor-not-allowed":"hover:bg-green-600"}`,disabled:a||!s.trim(),children:[a?t("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-sparkles-icon lucide-sparkles",children:[e("path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z"}),e("path",{d:"M20 3v4"}),e("path",{d:"M22 5h-4"}),e("path",{d:"M4 17v2"}),e("path",{d:"M5 18H3"})]}),a?"生成中...":"プレイリストを作成"]})]}),d&&t("div",{className:"mt-4 p-3 bg-red-900/50 text-red-200 rounded-lg text-sm",children:["エラー: ",d]})]}),t("div",{className:"w-full max-w-xl mx-auto px-4 mb-12",children:[e("div",{className:"text-center text-gray-300 font-bold text-lg mb-6 mt-10",children:"こんな風に聞いてみましょう"}),e("div",{className:"flex flex-col gap-3",children:g.map((r,i)=>e("button",{onClick:()=>f(r),className:"bg-gray-900 border border-gray-800 rounded-lg px-5 py-4 text-left hover:bg-gray-800 transition group",children:e("span",{className:"text-gray-300 group-hover:text-spotify-green",children:r})},i))})]})]}),v=()=>e(u,{children:t("div",{className:"w-full max-w-xl mx-auto my-6",children:[t("div",{className:"bg-gray-900 rounded-xl shadow-lg p-6 w-full border border-gray-800 mb-6",children:[e("div",{className:"bg-gray-800 rounded-lg p-4 mb-6",children:t("p",{className:"text-gray-300 italic",children:['"',l?.prompt,'"']})}),l?.setlist_id&&e("div",{className:"mb-6",children:e("iframe",{src:`https://open.spotify.com/embed/playlist/${l.setlist_id}`,width:"100%",height:"380",allow:"autoplay; clipboard-write; encrypted-media; fullscreen; picture-in-picture",loading:"lazy",className:"rounded-lg"})})]}),t("div",{className:"flex space-x-4",children:[e("button",{onClick:y,className:"w-full bg-gray-800 text-white font-bold py-4 rounded-full hover:bg-gray-700 transition flex items-center justify-center",children:"新しいプレイリストを作成"}),l?.setlist_id&&t("button",{onClick:w,className:"w-full bg-green-500 text-black font-bold py-4 rounded-full hover:bg-green-600 transition flex items-center justify-center gap-2",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-spotify",children:[e("circle",{cx:"12",cy:"12",r:"10"}),e("path",{d:"M8 11.8A5.4 5.4 0 0 1 17.8 9"}),e("path",{d:"M7 15a6.5 6.5 0 0 1 11.4-4.3"}),e("path",{d:"M8.5 18a8 8 0 0 1 13.5-5.3"})]}),"Spotifyで開く"]})]})]})});return t("div",{className:"min-h-screen bg-black flex flex-col items-center justify-between",children:[t("div",{className:"flex flex-col items-center mt-12 w-full px-4",children:[t("div",{className:"flex items-center gap-2 mb-6",children:[t("svg",{xmlns:"http://www.w3.org/2000/svg",width:"28",height:"28",viewBox:"0 0 24 24",fill:"none",stroke:"#00f900","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round",className:"lucide lucide-music-icon lucide-music",children:[e("path",{d:"M9 18V5l12-2v13"}),e("circle",{cx:"6",cy:"18",r:"3"}),e("circle",{cx:"18",cy:"16",r:"3"})]}),e("h1",{className:"text-white text-3xl font-bold",children:"Spotify AI"})]}),l?v():b()]}),t("footer",{className:"w-full text-center py-8 bg-gray-900 text-gray-400 text-sm border-t border-gray-800",children:[e("div",{className:"flex items-center justify-center gap-2 mb-2",children:e("span",{className:"font-bold text-white",children:"Spotify AI Playlist Creator"})}),t("div",{children:["by"," ",e("a",{href:"https://github.com/viIdhjarta",className:"text-green-400 hover:underline",children:"vildhjarta"})]})]})]})}export{C as default};
